<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="978px" preserveAspectRatio="none" style="width:2097px;height:978px;background:#FFFFFF;" version="1.1" viewBox="0 0 2097 978" width="2097px" zoomAndPan="magnify"><defs><filter height="300%" id="f53fy2ytb70qs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="43.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="312.75" y="124.9453"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="475.7194" style="stroke:#A80036;stroke-width:1.5;" width="15" x="528.75" y="189.6172"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="174.6877" style="stroke:#A80036;stroke-width:1.5;" width="15" x="742.5" y="674.3366"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="131.0158" style="stroke:#A80036;stroke-width:1.5;" width="15" x="939.75" y="305.6331"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="43.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1340.25" y="480.3208"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="64.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1572" y="578.1647"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="442.7194" style="stroke:#000000;stroke-width:3.0;" width="1473.75" x="409.5" y="212.1172"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="287.7036" style="stroke:#000000;stroke-width:3.0;" width="1031.25" x="424.5" y="248.2892"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="103.5" x2="103.5" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="319.5" x2="319.5" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="535.5" x2="535.5" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="750" x2="750" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="946.5" x2="946.5" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1182.75" x2="1182.75" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1347.75" x2="1347.75" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1578.75" x2="1578.75" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1793.25" x2="1793.25" y1="100.9453" y2="876.0244"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="2025" x2="2025" y1="100.9453" y2="876.0244"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="184.5" x="7.5" y="95.9927">importNodesFlow</text><ellipse cx="104.25" cy="52.5" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="98.25,34.5,107.25,27,104.25,34.5,107.25,42,98.25,34.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="184.5" x="7.5" y="894.017">importNodesFlow</text><ellipse cx="104.25" cy="922.9697" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="98.25,904.9697,107.25,897.4697,104.25,904.9697,107.25,912.4697,98.25,904.9697" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="199.5" x="216" y="95.9927">prepareNodesStep</text><ellipse cx="320.25" cy="52.5" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="314.25,34.5,323.25,27,320.25,34.5,323.25,42,314.25,34.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="199.5" x="216" y="894.017">prepareNodesStep</text><ellipse cx="320.25" cy="922.9697" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="314.25,904.9697,323.25,897.4697,320.25,904.9697,323.25,912.4697,314.25,904.9697" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="184.5" x="439.5" y="95.9927">importNodesStep</text><ellipse cx="536.25" cy="52.5" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="530.25,34.5,539.25,27,536.25,34.5,539.25,42,530.25,34.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="184.5" x="439.5" y="894.017">importNodesStep</text><ellipse cx="536.25" cy="922.9697" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="530.25,904.9697,539.25,897.4697,536.25,904.9697,539.25,912.4697,530.25,904.9697" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="195" x="648" y="95.9927">commitNodesStep</text><ellipse cx="750" cy="52.5" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="744,34.5,753,27,750,34.5,753,42,744,34.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="195" x="648" y="894.017">commitNodesStep</text><ellipse cx="750" cy="922.9697" fill="#FEFECE" filter="url(#f53fy2ytb70qs)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="744,904.9697,753,897.4697,750,904.9697,753,912.4697,744,904.9697" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="154.5" x="867" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="133.5" x="877.5" y="77.9927">NodeReader</text><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="154.5" x="867" y="874.5244"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="133.5" x="877.5" y="904.517">NodeReader</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="105" x="1125.75" y="95.9927">SourceDb</text><path d="M1155.75,22.5 C1155.75,7.5 1182.75,7.5 1182.75,7.5 C1182.75,7.5 1209.75,7.5 1209.75,22.5 L1209.75,61.5 C1209.75,76.5 1182.75,76.5 1182.75,76.5 C1182.75,76.5 1155.75,76.5 1155.75,61.5 L1155.75,22.5 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1155.75,22.5 C1155.75,37.5 1182.75,37.5 1182.75,37.5 C1182.75,37.5 1209.75,37.5 1209.75,22.5 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="105" x="1125.75" y="894.017">SourceDb</text><path d="M1155.75,913.9697 C1155.75,898.9697 1182.75,898.9697 1182.75,898.9697 C1182.75,898.9697 1209.75,898.9697 1209.75,913.9697 L1209.75,952.9697 C1209.75,967.9697 1182.75,967.9697 1182.75,967.9697 C1182.75,967.9697 1155.75,967.9697 1155.75,952.9697 L1155.75,913.9697 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1155.75,913.9697 C1155.75,928.9697 1182.75,928.9697 1182.75,928.9697 C1182.75,928.9697 1209.75,928.9697 1209.75,913.9697 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="180" x="1254.75" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="159" x="1265.25" y="77.9927">NodeProcessor</text><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="180" x="1254.75" y="874.5244"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="159" x="1265.25" y="904.517">NodeProcessor</text><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="241.5" x="1455.75" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="220.5" x="1466.25" y="77.9927">GenericImportWriter</text><rect fill="#FEFECE" filter="url(#f53fy2ytb70qs)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="241.5" x="1455.75" y="874.5244"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="220.5" x="1466.25" y="904.517">GenericImportWriter</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="141" x="1718.25" y="95.9927">StagingTable</text><path d="M1766.25,22.5 C1766.25,7.5 1793.25,7.5 1793.25,7.5 C1793.25,7.5 1820.25,7.5 1820.25,22.5 L1820.25,61.5 C1820.25,76.5 1793.25,76.5 1793.25,76.5 C1793.25,76.5 1766.25,76.5 1766.25,61.5 L1766.25,22.5 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1766.25,22.5 C1766.25,37.5 1793.25,37.5 1793.25,37.5 C1793.25,37.5 1820.25,37.5 1820.25,22.5 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="141" x="1718.25" y="894.017">StagingTable</text><path d="M1766.25,913.9697 C1766.25,898.9697 1793.25,898.9697 1793.25,898.9697 C1793.25,898.9697 1820.25,898.9697 1820.25,913.9697 L1820.25,952.9697 C1820.25,967.9697 1793.25,967.9697 1793.25,967.9697 C1793.25,967.9697 1766.25,967.9697 1766.25,952.9697 L1766.25,913.9697 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1766.25,913.9697 C1766.25,928.9697 1793.25,928.9697 1793.25,928.9697 C1793.25,928.9697 1820.25,928.9697 1820.25,913.9697 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="130.5" x="1956" y="95.9927">TargetTable</text><path d="M1998.75,22.5 C1998.75,7.5 2025.75,7.5 2025.75,7.5 C2025.75,7.5 2052.75,7.5 2052.75,22.5 L2052.75,61.5 C2052.75,76.5 2025.75,76.5 2025.75,76.5 C2025.75,76.5 1998.75,76.5 1998.75,61.5 L1998.75,22.5 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1998.75,22.5 C1998.75,37.5 2025.75,37.5 2025.75,37.5 C2025.75,37.5 2052.75,37.5 2052.75,22.5 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="130.5" x="1956" y="894.017">TargetTable</text><path d="M1998.75,913.9697 C1998.75,898.9697 2025.75,898.9697 2025.75,898.9697 C2025.75,898.9697 2052.75,898.9697 2052.75,913.9697 L2052.75,952.9697 C2052.75,967.9697 2025.75,967.9697 2025.75,967.9697 C2025.75,967.9697 1998.75,967.9697 1998.75,952.9697 L1998.75,913.9697 " fill="#FEFECE" filter="url(#f53fy2ytb70qs)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1998.75,913.9697 C1998.75,928.9697 2025.75,928.9697 2025.75,928.9697 C2025.75,928.9697 2052.75,928.9697 2052.75,913.9697 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="43.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="312.75" y="124.9453"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="475.7194" style="stroke:#A80036;stroke-width:1.5;" width="15" x="528.75" y="189.6172"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="174.6877" style="stroke:#A80036;stroke-width:1.5;" width="15" x="742.5" y="674.3366"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="131.0158" style="stroke:#A80036;stroke-width:1.5;" width="15" x="939.75" y="305.6331"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="43.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1340.25" y="480.3208"/><rect fill="#FFFFFF" filter="url(#f53fy2ytb70qs)" height="64.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1572" y="578.1647"/><polygon fill="#A80036" points="294.75,118.9453,309.75,124.9453,294.75,130.9453,300.75,124.9453" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="104.25" x2="303.75" y1="124.9453" y2="124.9453"/><polygon fill="#A80036" points="1775.25,162.6172,1790.25,168.6172,1775.25,174.6172,1781.25,168.6172" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="320.25" x2="1784.25" y1="168.6172" y2="168.6172"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="81" x="330.75" y="161.0239">truncate</text><polygon fill="#A80036" points="510.75,183.6172,525.75,189.6172,510.75,195.6172,516.75,189.6172" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="104.25" x2="519.75" y1="189.6172" y2="189.6172"/><path d="M409.5,212.1172 L738,212.1172 L738,222.6172 L723,237.6172 L409.5,237.6172 L409.5,212.1172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="442.7194" style="stroke:#000000;stroke-width:3.0;" width="1473.75" x="409.5" y="212.1172"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="261" x="432" y="231.6958">Read all rows in chunks</text><path d="M424.5,248.2892 L925.5,248.2892 L925.5,258.7892 L910.5,273.7892 L424.5,273.7892 L424.5,248.2892 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="287.7036" style="stroke:#000000;stroke-width:3.0;" width="1031.25" x="424.5" y="248.2892"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="433.5" x="447" y="267.8678">Read and process chunk of N elements</text><polygon fill="#A80036" points="921.75,299.6331,936.75,305.6331,921.75,311.6331,927.75,305.6331" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="543.75" x2="930.75" y1="305.6331" y2="305.6331"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="58.5" x="554.25" y="298.0397">read()</text><polygon fill="#A80036" points="1164.75,343.305,1179.75,349.305,1164.75,355.305,1170.75,349.305" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="954.75" x2="1173.75" y1="349.305" y2="349.305"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="192" x="965.25" y="341.7116">import_nodes.sql</text><polygon fill="#A80036" points="971.25,386.9769,956.25,392.9769,971.25,398.9769,965.25,392.9769" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="962.25" x2="1181.25" y1="392.9769" y2="392.9769"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="108" x="980.25" y="385.3836">ResultSet</text><polygon fill="#A80036" points="560.25,430.6489,545.25,436.6489,560.25,442.6489,554.25,436.6489" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="551.25" x2="945.75" y1="436.6489" y2="436.6489"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="72" x="569.25" y="429.0555">JrNode</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="66" x="647.25" y="429.0555">| "null"</text><polygon fill="#A80036" points="1322.25,474.3208,1337.25,480.3208,1322.25,486.3208,1328.25,480.3208" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="543.75" x2="1331.25" y1="480.3208" y2="480.3208"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="82.5" x="554.25" y="472.7275">process(</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="72" x="636.75" y="472.7275">JrNode</text><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="7.5" x="708.75" y="472.7275">)</text><polygon fill="#A80036" points="560.25,517.9927,545.25,523.9927,560.25,529.9927,554.25,523.9927" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:2.0,2.0;" x1="551.25" x2="1346.25" y1="523.9927" y2="523.9927"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="180" x="569.25" y="516.3994">PersistableNode</text><polygon fill="#A80036" points="1554,572.1647,1569,578.1647,1554,584.1647,1560,578.1647" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="543.75" x2="1563" y1="578.1647" y2="578.1647"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="57" x="554.25" y="570.5713">write(</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="264" x="611.25" y="570.5713">Chunk&lt;PersistableNode&gt;</text><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="7.5" x="875.25" y="570.5713">)</text><polygon fill="#A80036" points="1775.25,615.8366,1790.25,621.8366,1775.25,627.8366,1781.25,621.8366" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1587" x2="1784.25" y1="621.8366" y2="621.8366"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="169.5" x="1597.5" y="614.2433">JDBC batch insert</text><polygon fill="#A80036" points="560.25,636.8366,545.25,642.8366,560.25,648.8366,554.25,642.8366" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:2.0,2.0;" x1="551.25" x2="1578" y1="642.8366" y2="642.8366"/><polygon fill="#A80036" points="724.5,668.3366,739.5,674.3366,724.5,680.3366,730.5,674.3366" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="104.25" x2="733.5" y1="674.3366" y2="674.3366"/><polygon fill="#A80036" points="1775.25,712.0085,1790.25,718.0085,1775.25,724.0085,1781.25,718.0085" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="757.5" x2="1784.25" y1="718.0085" y2="718.0085"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="75" x="768" y="710.4152">commit</text><polygon fill="#A80036" points="2007.75,755.6805,2022.75,761.6805,2007.75,767.6805,2013.75,761.6805" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1793.25" x2="2016.75" y1="761.6805" y2="761.6805"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="196.5" x="1803.75" y="754.0871">insert/update/delete</text><polygon fill="#A80036" points="774,799.3524,759,805.3524,774,811.3524,768,805.3524" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="765" x2="2024.25" y1="805.3524" y2="805.3524"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="244.5" x="783" y="797.7591">inserted/updated/deleted</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="72" x="1033.5" y="797.7591">NodePK</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="10.5" x="1105.5" y="797.7591">s</text><polygon fill="#A80036" points="1775.25,843.0244,1790.25,849.0244,1775.25,855.0244,1781.25,849.0244" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="750" x2="1784.25" y1="849.0244" y2="849.0244"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="81" x="760.5" y="841.431">truncate</text><!--MD5=[fd8ad25ff8ea584b454ce41d950b9e96]
@startuml

control importNodesFlow as flow
control prepareNodesStep as prepare_step
control importNodesStep as import_step
control commitNodesStep as commit_step
participant NodeReader as reader
database SourceDb as sdb
participant NodeProcessor as processor
participant GenericImportWriter as writer
database StagingTable as staging_table
database TargetTable as target_table

flow -> prepare_step
activate prepare_step

prepare_step -> staging_table : //truncate//
deactivate prepare_step

flow -> import_step
activate import_step

group Read all rows in chunks

    group Read and process chunk of N elements

        import_step -> reader : //read()//
        activate reader

        reader -> sdb : ""import_nodes.sql""
        reader <- sdb : ""ResultSet""

        import_step <- reader :""JrNode"" | "null"
        deactivate reader

        import_step -> processor : //process(//""JrNode""//)//
        activate processor
        import_step <- - processor : ""PersistableNode""
        deactivate processor

    end

    import_step -> writer : //write(//""Chunk<PersistableNode>""//)//
    activate writer
    writer -> staging_table : JDBC batch insert
    import_step <- - writer
    deactivate writer

end

deactivate import_step

flow -> commit_step
activate commit_step

commit_step -> staging_table : //commit//
staging_table -> target_table : //insert/update/delete//
commit_step <- target_table : inserted/updated/deleted ""NodePK""s

commit_step -> staging_table : //truncate//
deactivate commit_step

@enduml

PlantUML version 1.2021.7(Sun May 23 15:40:07 EEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>