<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1059px" preserveAspectRatio="none" style="width:1525px;height:1059px;background:#FFFFFF;" version="1.1" viewBox="0 0 1525 1059" width="1525.5px" zoomAndPan="magnify"><defs><filter height="300%" id="f6zh8449vu6zv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="336" x="702" y="10.5"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="115.5" x="712.5" y="30.2298">importJob :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="157.5" x="838.5" y="30.2298">o.s.batch.core.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="31.5" x="996" y="30.2298">Job</text><line style="stroke:#A80036;stroke-width:2.25;" x1="703.5" x2="1036.5" y1="37.4804" y2="37.4804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="451.5" x="644.25" y="153"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="126" x="654.75" y="172.7298">importFlow :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="199.5" x="791.25" y="172.7298">o.s.batch.core.job.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="94.5" x="990.75" y="172.7298">flow.Flow</text><line style="stroke:#A80036;stroke-width:2.25;" x1="645.75" x2="1094.25" y1="179.9804" y2="179.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="367.5" x="228.75" y="295.5"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="136.5" x="239.25" y="315.2298">prepareStep :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="157.5" x="386.25" y="315.2298">o.s.batch.core.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="42" x="543.75" y="315.2298">Step</text><line style="stroke:#A80036;stroke-width:2.25;" x1="230.25" x2="594.75" y1="322.4804" y2="322.4804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="357" x="691.5" y="295.5"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="126" x="702" y="315.2298">importStep :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="157.5" x="838.5" y="315.2298">o.s.batch.core.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="42" x="996" y="315.2298">Step</text><line style="stroke:#A80036;stroke-width:2.25;" x1="693" x2="1047" y1="322.4804" y2="322.4804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="357" x="1147.5" y="295.5"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="126" x="1158" y="315.2298">commitStep :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="157.5" x="1294.5" y="315.2298">o.s.batch.core.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="42" x="1452" y="315.2298">Step</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1149" x2="1503" y1="322.4804" y2="322.4804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="451.5" x="411.75" y="822"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="430.5" x="422.25" y="841.7298">writer : GenericImportWriter&lt;ENTITY, KEY&gt;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="413.25" x2="861.75" y1="848.9804" y2="848.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="420" x="10.5" y="534"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="399" x="21" y="553.7298">cleanupTasklet : GenericCleanupTasklet</text><line style="stroke:#A80036;stroke-width:2.25;" x1="12" x2="429" y1="560.9804" y2="560.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="399" x="961.5" y="726"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="378" x="972" y="745.7298">commitTasklet : GenericCommitTasklet</text><line style="stroke:#A80036;stroke-width:2.25;" x1="963" x2="1359" y1="752.9804" y2="752.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="630" x="555" y="438"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="84" x="565.5" y="457.7298">reader :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="252" x="660" y="457.7298">o.s.batch.item.database.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="262.5" x="912" y="457.7298">JdbcCursorItemReader&lt;ROW&gt;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="556.5" x2="1183.5" y1="464.9804" y2="464.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="577.5" x="581.25" y="630"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="115.5" x="591.75" y="649.7298">processor :</text><text fill="#808080" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="157.5" x="717.75" y="649.7298">o.s.batch.item.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="273" x="875.25" y="649.7298">ItemProcessor&lt;ROW, ENTITY&gt;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="582.75" x2="1157.25" y1="656.9804" y2="656.9804"/><rect fill="#FEFECE" filter="url(#f6zh8449vu6zv)" height="50.9804" style="stroke:#A80036;stroke-width:2.25;" width="472.5" x="401.25" y="988.5"/><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacing" textLength="451.5" x="411.75" y="1008.2298">repository : IImportRepository&lt;ENTITY, KEY&gt;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="402.75" x2="872.25" y1="1015.4804" y2="1015.4804"/><!--MD5=[e02c4142dc5e813a04396ddf4ccc0506]
reverse link job to flow--><path codeLine="19" d="M870,81.81 C870,105.39 870,133.455 870,152.985 " fill="none" id="job-backto-flow" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="870,61.8,864,70.8,870,79.8,876,70.8,870,61.8" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[6ef0549b8f1d1ed22cca3edd06e39943]
reverse link flow to pstep--><path codeLine="20" d="M771.93,209.895 C688.17,235.44 569.22,271.71 491.46,295.425 " fill="none" id="flow-backto-pstep" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="790.83,204.135,780.4733,201.0145,773.6094,209.3743,783.9661,212.4949,790.83,204.135" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[5d3fea4be6483a5ccb80de3aaead45ec]
reverse link flow to istep--><path codeLine="21" d="M870,224.31 C870,247.89 870,275.955 870,295.485 " fill="none" id="flow-backto-istep" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="870,204.3,864,213.3,870,222.3,876,213.3,870,204.3" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[bc7749c3a9570feb9bd1aee0c0e62f6a]
reverse link flow to cstep--><path codeLine="22" d="M967.74,209.895 C1051.245,235.44 1169.805,271.71 1247.295,295.425 " fill="none" id="flow-backto-cstep" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="948.915,204.135,955.7674,212.5043,966.1284,209.3979,959.276,201.0287,948.915,204.135" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[d29d30e519f1f62cb70b2e8d5b55d0cd]
reverse link pstep to cleanup--><path codeLine="24" d="M380.265,362.04 C340.38,410.97 273.675,492.765 240.51,533.46 " fill="none" id="pstep-backto-cleanup" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="392.67,346.815,382.3342,350.0044,381.303,360.7717,391.6387,357.5824,392.67,346.815" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[235e2e2129148eeae6af428b7ac3cadf]
reverse link istep to reader--><path codeLine="25" d="M870,366.81 C870,390.39 870,418.455 870,437.985 " fill="none" id="istep-backto-reader" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="870,346.8,864,355.8,870,364.8,876,355.8,870,346.8" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[b9134181e6d21dda15124a2435eb79ed]
reverse link istep to processor--><path codeLine="26" d="M1068.345,346.305 C1123.245,363.06 1176.915,391.14 1210.5,438 C1279.83,534.735 1106.925,598.245 982.935,630 " fill="none" id="istep-backto-processor" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="1048.905,340.845,1055.9476,349.0548,1066.2346,345.7115,1059.192,337.5017,1048.905,340.845" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[8de810650780beb14a4bef68732f59cf]
reverse link istep to writer--><path codeLine="27" d="M672.33,345.645 C616.665,362.34 562.065,390.54 528,438 C438.84,562.23 567.54,754.74 618.375,821.91 " fill="none" id="istep-backto-writer" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="691.215,340.41,680.9397,337.031,673.8686,345.2164,684.1439,348.5953,691.215,340.41" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[185022f1f02edb1c86979bfc2837ce01]
reverse link cstep to commit--><path codeLine="28" d="M1309.5,365.265 C1275.255,453.975 1197.45,655.545 1170.45,725.52 " fill="none" id="cstep-backto-commit" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="1316.655,346.71,1307.8148,352.943,1310.1682,363.5005,1319.0084,357.2675,1316.655,346.71" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[1e3d78a6ca77107908da91a860b3d8dc]
link reader to processor--><path codeLine="30" d="M870,489.315 C870,523.2 870,584.655 870,622.155 " fill="none" id="reader-to-processor" style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="870,629.775,876,616.275,870,622.275,864,616.275,870,629.775" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[681ff4c62cf659a5dea25fc6e7d5ba7d]
link processor to writer--><path codeLine="31" d="M840.075,681.315 C797.355,716.055 718.995,779.76 673.26,816.93 " fill="none" id="processor-to-writer" style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="667.305,821.775,681.5677,817.9246,673.1278,817.048,674.0045,808.6081,667.305,821.775" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[ac95e410e2513471c13447f9231abbf9]
link cleanup to repository--><path codeLine="33" d="M210.495,585.09 C194.685,627.285 169.23,715.905 205.5,777 C274.29,892.845 422.28,955.335 525.78,986.235 " fill="none" id="cleanup-to-repository" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="533.16,988.41,521.88,978.87,525.96,986.31,518.52,990.39,533.16,988.41" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="228" x="207" y="758.3286">clearStagingTable()</text><!--MD5=[15b9525b1a1183ac8c30ad0330785227]
link writer to repository--><path codeLine="34" d="M637.5,873.12 C637.5,901.62 637.5,949.125 637.5,980.625 " fill="none" id="writer-to-repository" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="637.5,988.275,643.5,974.775,637.5,980.775,631.5,974.775,637.5,988.275" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="396" x="639" y="937.5786">submitToStaging(Iterable&lt;ENTITY&gt;)</text><!--MD5=[3a54b836c5fd9adf0a318cfb2d9889d7]
link commit to repository--><path codeLine="35" d="M1154.01,777.525 C1140.795,819.045 1108.02,902.625 1048.5,943.5 C1019.445,963.465 952.95,978.225 881.73,988.845 " fill="none" id="commit-to-repository" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#A80036" points="873.93,990,888.1493,994.0075,881.3529,988.9273,886.4331,982.1309,873.93,990" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="276" x="1138.5" y="854.3286">commitStagingToTarget()</text><!--MD5=[4178177ff00c17be226761beacb165ed]
@startuml

skinparam defaultFontName monospaced

object "importJob : <color:gray>o.s.batch.core.</color>Job" as job
object "importFlow : <color:gray>o.s.batch.core.job.</color>flow.Flow" as flow
object "prepareStep : <color:gray>o.s.batch.core.</color>Step" as pstep
object "importStep : <color:gray>o.s.batch.core.</color>Step" as istep
object "commitStep : <color:gray>o.s.batch.core.</color>Step" as cstep

object "writer : GenericImportWriter<ENTITY, KEY>" as writer
object "cleanupTasklet : GenericCleanupTasklet" as cleanup
object "commitTasklet : GenericCommitTasklet" as commit

object "reader : <color:gray>o.s.batch.item.database.</color>JdbcCursorItemReader<ROW>" as reader
object "processor : <color:gray>o.s.batch.item.</color>ItemProcessor<ROW, ENTITY>" as processor

object "repository : IImportRepository<ENTITY, KEY>" as repository

job *- - flow
flow *- - pstep
flow *- - istep
flow *- - cstep

pstep *- - cleanup
istep *- - reader
istep *- - processor
istep *- - writer
cstep *- - commit

reader ..> processor
processor ..> writer

cleanup - -> repository : "clearStagingTable()"
writer - -> repository  : "submitToStaging(Iterable<ENTITY>)"
commit - -> repository : "commitStagingToTarget()"

@enduml

PlantUML version 1.2021.7(Sun May 23 15:40:07 EEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>