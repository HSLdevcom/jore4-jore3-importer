<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="910.5px" preserveAspectRatio="none" style="width:1620px;height:910px;" version="1.1" viewBox="0 0 1620 910" width="1620px" zoomAndPan="magnify"><defs><filter height="300%" id="f15bmxrq6kywda" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="328.2036" style="stroke:#A80036;stroke-width:1.5;" width="15" x="375" y="183.7892"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="131.0158" style="stroke:#A80036;stroke-width:1.5;" width="15" x="624" y="263.6331"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="106.8439" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1056.75" y="555.6647"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="64.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1306.5" y="716.6805"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="548.0632" style="stroke:#000000;stroke-width:3.0;" width="1233.75" x="15" y="126.4453"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="263.5316" style="stroke:#000000;stroke-width:3.0;" width="684" x="267" y="206.2892"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="147" x2="147" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="382.5" x2="382.5" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="630.75" x2="630.75" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="879" x2="879" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1063.5" x2="1063.5" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1314" x2="1314" y1="100.9453" y2="808.3524"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:5.0,5.0;" x1="1538.25" x2="1538.25" y1="100.9453" y2="808.3524"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="225" x="30" y="95.9927">importLinkPointsStep</text><ellipse cx="147" cy="52.5" fill="#FEFECE" filter="url(#f15bmxrq6kywda)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="141,34.5,150,27,147,34.5,150,42,141,34.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="225" x="30" y="826.3451">importLinkPointsStep</text><ellipse cx="147" cy="855.2977" fill="#FEFECE" filter="url(#f15bmxrq6kywda)" rx="18" ry="18" style="stroke:#A80036;stroke-width:3.0;"/><polygon fill="#A80036" points="141,837.2977,150,829.7977,147,837.2977,150,844.7977,141,837.2977" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="195" x="282" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="174" x="292.5" y="77.9927">LinkPointReader</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="195" x="282" y="806.8524"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="174" x="292.5" y="836.8451">LinkPointReader</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="151.5" x="552.75" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="130.5" x="563.25" y="77.9927">PointReader</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="151.5" x="552.75" y="806.8524"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="130.5" x="563.25" y="836.8451">PointReader</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="105" x="822" y="95.9927">SourceDb</text><path d="M852,22.5 C852,7.5 879,7.5 879,7.5 C879,7.5 906,7.5 906,22.5 L906,61.5 C906,76.5 879,76.5 879,76.5 C879,76.5 852,76.5 852,61.5 L852,22.5 " fill="#FEFECE" filter="url(#f15bmxrq6kywda)" style="stroke:#000000;stroke-width:2.25;"/><path d="M852,22.5 C852,37.5 879,37.5 879,37.5 C879,37.5 906,37.5 906,22.5 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="105" x="822" y="826.3451">SourceDb</text><path d="M852,846.2977 C852,831.2977 879,831.2977 879,831.2977 C879,831.2977 906,831.2977 906,846.2977 L906,885.2977 C906,900.2977 879,900.2977 879,900.2977 C879,900.2977 852,900.2977 852,885.2977 L852,846.2977 " fill="#FEFECE" filter="url(#f15bmxrq6kywda)" style="stroke:#000000;stroke-width:2.25;"/><path d="M852,846.2977 C852,861.2977 879,861.2977 879,861.2977 C879,861.2977 906,861.2977 906,846.2977 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="220.5" x="951" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="199.5" x="961.5" y="77.9927">LinkPointProcessor</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="220.5" x="951" y="806.8524"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="199.5" x="961.5" y="836.8451">LinkPointProcessor</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="237" x="1192.5" y="48"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="216" x="1203" y="77.9927">LinkGeometryWriter</text><rect fill="#FEFECE" filter="url(#f15bmxrq6kywda)" height="45.4453" style="stroke:#A80036;stroke-width:2.25;" width="237" x="1192.5" y="806.8524"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="216" x="1203" y="836.8451">LinkGeometryWriter</text><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="151.5" x="1458.75" y="95.9927">DestinationDb</text><path d="M1512,22.5 C1512,7.5 1539,7.5 1539,7.5 C1539,7.5 1566,7.5 1566,22.5 L1566,61.5 C1566,76.5 1539,76.5 1539,76.5 C1539,76.5 1512,76.5 1512,61.5 L1512,22.5 " fill="#FEFECE" filter="url(#f15bmxrq6kywda)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1512,22.5 C1512,37.5 1539,37.5 1539,37.5 C1539,37.5 1566,37.5 1566,22.5 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="21" lengthAdjust="spacing" textLength="151.5" x="1458.75" y="826.3451">DestinationDb</text><path d="M1512,846.2977 C1512,831.2977 1539,831.2977 1539,831.2977 C1539,831.2977 1566,831.2977 1566,846.2977 L1566,885.2977 C1566,900.2977 1539,900.2977 1539,900.2977 C1539,900.2977 1512,900.2977 1512,885.2977 L1512,846.2977 " fill="#FEFECE" filter="url(#f15bmxrq6kywda)" style="stroke:#000000;stroke-width:2.25;"/><path d="M1512,846.2977 C1512,861.2977 1539,861.2977 1539,861.2977 C1539,861.2977 1566,861.2977 1566,846.2977 " fill="none" style="stroke:#000000;stroke-width:2.25;"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="328.2036" style="stroke:#A80036;stroke-width:1.5;" width="15" x="375" y="183.7892"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="131.0158" style="stroke:#A80036;stroke-width:1.5;" width="15" x="624" y="263.6331"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="106.8439" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1056.75" y="555.6647"/><rect fill="#FFFFFF" filter="url(#f15bmxrq6kywda)" height="64.6719" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1306.5" y="716.6805"/><path d="M15,126.4453 L516,126.4453 L516,136.9453 L501,151.9453 L15,151.9453 L15,126.4453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="548.0632" style="stroke:#000000;stroke-width:3.0;" width="1233.75" x="15" y="126.4453"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="433.5" x="37.5" y="146.0239">Read and process chunk of N elements</text><polygon fill="#A80036" points="357,177.7892,372,183.7892,357,189.7892,363,183.7892" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="147" x2="366" y1="183.7892" y2="183.7892"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="58.5" x="157.5" y="176.1958">read()</text><path d="M267,206.2892 L783,206.2892 L783,216.7892 L768,231.7892 L267,231.7892 L267,206.2892 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="263.5316" style="stroke:#000000;stroke-width:3.0;" width="684" x="267" y="206.2892"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-weight="bold" lengthAdjust="spacing" textLength="448.5" x="289.5" y="225.8678">Repeat until all points for a link are read</text><polygon fill="#A80036" points="606,257.6331,621,263.6331,606,269.6331,612,263.6331" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="390" x2="615" y1="263.6331" y2="263.6331"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="58.5" x="400.5" y="256.0397">read()</text><polygon fill="#A80036" points="861,301.305,876,307.305,861,313.305,867,307.305" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="639" x2="870" y1="307.305" y2="307.305"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="204" x="649.5" y="299.7116">import_points.sql</text><polygon fill="#A80036" points="655.5,344.9769,640.5,350.9769,655.5,356.9769,649.5,350.9769" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="646.5" x2="877.5" y1="350.9769" y2="350.9769"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="108" x="664.5" y="343.3836">ResultSet</text><polygon fill="#A80036" points="406.5,388.6489,391.5,394.6489,406.5,400.6489,400.5,394.6489" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:2.0,2.0;" x1="397.5" x2="630" y1="394.6489" y2="394.6489"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="96" x="415.5" y="387.0555">PointRow</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="6" x="517.5" y="387.0555">|</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="48" x="529.5" y="387.0555">null</text><line style="stroke:#A80036;stroke-width:1.5;" x1="390" x2="453" y1="438.3208" y2="438.3208"/><line style="stroke:#A80036;stroke-width:1.5;" x1="453" x2="453" y1="438.3208" y2="457.8208"/><line style="stroke:#A80036;stroke-width:1.5;" x1="391.5" x2="453" y1="457.8208" y2="457.8208"/><polygon fill="#A80036" points="406.5,451.8208,391.5,457.8208,406.5,463.8208,400.5,457.8208" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="75" x="400.5" y="430.7275">store to</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="132" x="481.5" y="430.7275">ReaderState</text><polygon fill="#A80036" points="163.5,505.9927,148.5,511.9927,163.5,517.9927,157.5,511.9927" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="154.5" x2="381" y1="511.9927" y2="511.9927"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="120" x="172.5" y="504.3994">LinkPoints</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="66" x="298.5" y="504.3994">| "null"</text><polygon fill="#A80036" points="1038.75,549.6647,1053.75,555.6647,1038.75,561.6647,1044.75,555.6647" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="147" x2="1047.75" y1="555.6647" y2="555.6647"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="82.5" x="157.5" y="548.0713">process(</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="120" x="240" y="548.0713">LinkPoints</text><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="7.5" x="360" y="548.0713">)</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1071.75" x2="1134.75" y1="599.3366" y2="599.3366"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1134.75" x2="1134.75" y1="599.3366" y2="618.8366"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1073.25" x2="1134.75" y1="618.8366" y2="618.8366"/><polygon fill="#A80036" points="1088.25,612.8366,1073.25,618.8366,1088.25,624.8366,1082.25,618.8366" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="148.5" x="1082.25" y="591.7433">build geometry</text><polygon fill="#A80036" points="163.5,656.5085,148.5,662.5085,163.5,668.5085,157.5,662.5085" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:2.0,2.0;" x1="154.5" x2="1062.75" y1="662.5085" y2="662.5085"/><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="144" x="172.5" y="654.9152">LinkGeometry</text><polygon fill="#A80036" points="1288.5,710.6805,1303.5,716.6805,1288.5,722.6805,1294.5,716.6805" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="147" x2="1297.5" y1="716.6805" y2="716.6805"/><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="57" x="157.5" y="709.0871">write(</text><text fill="#000000" font-family="monospace" font-size="19.5" lengthAdjust="spacing" textLength="228" x="214.5" y="709.0871">Chunk&lt;LinkGeometry&gt;</text><text fill="#000000" font-family="sans-serif" font-size="19.5" font-style="italic" lengthAdjust="spacing" textLength="7.5" x="442.5" y="709.0871">)</text><polygon fill="#A80036" points="1521,754.3524,1536,760.3524,1521,766.3524,1527,760.3524" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1321.5" x2="1530" y1="760.3524" y2="760.3524"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="181.5" x="1332" y="752.7591">JDBC batch update</text><polygon fill="#A80036" points="163.5,775.3524,148.5,781.3524,163.5,787.3524,157.5,781.3524" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;stroke-dasharray:2.0,2.0;" x1="154.5" x2="1312.5" y1="781.3524" y2="781.3524"/><!--MD5=[4c5d86e39d6d7dd05136af411dcf929d]
@startuml

control importLinkPointsStep as step
participant LinkPointReader as linkpoint_reader
participant PointReader as point_reader
database SourceDb as sdb
participant LinkPointProcessor as processor
participant LinkGeometryWriter as writer
database DestinationDb as ddb

group Read and process chunk of N elements

    step -> linkpoint_reader : //read()//
    activate linkpoint_reader

    group Repeat until all points for a link are read
        linkpoint_reader -> point_reader : //read()//

        activate point_reader

        point_reader -> sdb : ""import_points.sql""
        point_reader <- sdb : ""ResultSet""

        linkpoint_reader <- - point_reader : ""PointRow"" | ""null""
        deactivate point_reader

        linkpoint_reader -> linkpoint_reader : store to ""ReaderState""
    end

    step <- linkpoint_reader :""LinkPoints"" | "null"
    deactivate linkpoint_reader

    step -> processor : //process(//""LinkPoints""//)//
    activate processor
    processor -> processor : build geometry
    step <- - processor : ""LinkGeometry""
    deactivate processor

end

step -> writer : //write(//""Chunk<LinkGeometry>""//)//
activate writer
writer -> ddb : JDBC batch update
step <- - writer
deactivate writer

@enduml

PlantUML version 1.2021.2(Sun Mar 07 13:10:27 EET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>